{
  "version": "1.5.0",
  "updated_at": "2025-09-08",
  "product_name": "Geronimo",
  "goals": [
    "Local-first MVP (no real writes yet).",
    "Two modules: todos and time_tracking.",
    "Desktop layout with a collapsible left sidebar; content on the right.",
    "Mobile layout with a top-nav hamburger that opens the same menu.",
    "Shared TopBanner across modules with consistent theme tokens.",
    "Todos uses category-derived tabs (including All) computed from the dataset.",
    "Responsive and accessible UI."
  ],
  "non_goals": [
    "No Cloudflare/Docker/remote infra.",
    "No authentication or analytics.",
    "No third-party component libraries without approval."
  ],
  "stack_preferences": {
    "frontend": "React + TypeScript",
    "build_tool": "Vite",
    "styling": "TailwindCSS",
    "routing": "in-app state (no URL routing)"
  },
  "layout": {
    "navigation": "left_sidebar_desktop + mobile_drawer",
    "sidebar": {
      "expanded_px": 264,
      "collapsed_px": 72,
      "collapsible": true,
      "shows_icons_and_labels": true,
      "collapsed_shows_icons_only": true
    },
    "topnav": {
      "height_px": 56,
      "hamburger_on_mobile": true,
      "drawer_behavior": "focus_trap_and_esc_to_close"
    }
  },
  "modules": [
    {
      "id": "todos",
      "title": "To-Dos",
      "surface": "page",
      "requirements": [
        "Interactive table with borders, zebra rows, sticky header, hover state.",
        "Columns: Task | Status | Priority | Category | Created | Actions.",
        "Inline editing: clicking Task toggles input; Enter/âŒ˜Enter commits to working copy; Esc cancels; blur commits.",
        "Status dropdown (UI-only): open | paused | blocked (default open); changes staged only, not persisted.",
        "Row actions: Complete (green) hides row and stages removal; dirty rows show Update (teal) to stage edits.",
        "Save button: rebuilds entire todos file from working set and posts array; disabled with zero staged; shows count when >0.",
        "Sorting: created_at desc default and priority (high>medium>low|null)."
      ],
      "constraints": [
        "Do not hardcode category options; compute from data.",
        "Keep all behavior local-first (in-memory + optional localStorage).",
        "Ignore any status found in source data for persistence; only use UI-only status.",
        "Save is the only network action; Update/Complete are local until Save."
      ],
      "defaults": {
        "tab_order": "alpha",
        "default_sort": { "column": "created_at", "direction": "desc" },
        "id_generation": "uuid"
      },
      "acceptance": [
        "Table headers (desktop): Task | Status | Priority | Category | Created | Actions.",
        "Editable cells have visible emerald focus ring and support keyboard shortcuts.",
        "Status dropdown has aria-label and is UI-only; not persisted in payload.",
        "Save posts one array and clears staging; Update/Complete do not call network.",
        "Export length N; first element is oldest (id:1), last is newest (id:N).",
        "All exported status values are 'open'.",
        "Completed rows are absent from export.",
        "Local UI reflects applied changes after Save; refresh preserves them."
      ]
    },
    {
      "id": "time_tracking",
      "title": "Time Tracking",
      "surface": "page",
      "requirements": [
        "Start timer (count-up), stop, edit duration/note, append to list.",
        "List sessions with edit/delete before submit.",
        "Submit action is stubbed (mocked API)."
      ],
      "constraints": [
        "Accurate duration math to seconds.",
        "Local-first behavior (in-memory + optional localStorage)."
      ]
    }
  ],
  "theming": {
    "source_of_truth": "/src/theme/config.ts",
    "driven_by": "/meta/style_profile.json",
    "rules": [
      "Do not hardcode colors/fonts in components; import tokens.",
      "TopBanner renders identically on all modules."
    ]
  },
  "data_model": {
    "todo": {
      "task": "string",
      "category": "string|null",
      "created_at": "string ISO-8601",
      "priority": "\"low\"|\"medium\"|\"high\"|null (optional)",
      "id": "string (internal-only; uuid; never displayed)",
      "status": "(ignored by UI if present)"
    },
    "session": {
      "id": "string",
      "started_at": "string ISO-8601",
      "ended_at": "string ISO-8601|null",
      "duration_ms": "number",
      "note": "string|null"
    }
  },
  "io_contracts": {
    "seed_inputs": [
      "/public/data/todos.json",
      "/public/data/sessions.json"
    ],
    "persistence_strategy": [
      "In-memory React state.",
      "Optional localStorage mirror.",
      "Save rebuilds full file payload for webhook (mocked in dev)."
    ],
    "future_webhooks": [
      {
        "name": "saveTodosFile",
        "path": "/webhook/todo-file-save",
        "method": "POST",
        "enabled_in_mvp": false
      },
      {
        "name": "saveSessions",
        "path": "/webhook/time-log-batch-save",
        "method": "POST",
        "enabled_in_mvp": false
      }
    ]
  },
  "accessibility": {
    "rules": [
      "Semantic elements; visible focus.",
      "Keyboard operable navigation and tables.",
      "ARIA where appropriate."
    ]
  },
  "architecture": {
    "principles": [
      "Shared primitives (TopBanner, Sidebar, Tabs, Card, Button).",
      "Pages own local state and logic.",
      "ApiClient centralizes mocked POSTs.",
      "Avoid cross-page imports that create coupling."
    ],
    "extension_points": [
      "Add new modules by composing the same AppShell.",
      "Promote mock API to real webhooks with env vars later."
    ],
    "guardrails_for_agent": [
      "Do not modify /meta/*.",
      "Do not hardcode categories.",
      "Prefer new files over modifying shared primitives unless truly shared."
    ]
  },
  "acceptance_checks": [
    "Brand displays as Geronimo in TopBanner.",
    "Desktop: collapsible left sidebar; Mobile: hamburger drawer.",
    "To-Dos: category tabs derived from data, table styled per tokens, sort/filter/add/edit, Save stubbed.",
    "Time Tracking: start/stop/edit/append, Submit mocked.",
    "Theme tokens are used consistently across modules.",
    "A global toast system exists; any module can trigger success/error/info and it renders once via AppShell."
  ]
}
  