{
  "version": "1.7.0",
  "updated_at": "2025-09-15",
  "product_name": "Geronimo",
  "goals": [
    "Local-first MVP with webhook integration for data persistence.",
    "Three modules: todos, ideas, and time_tracking with full functionality.",
    "Desktop layout with a collapsible left sidebar; content on the right.",
    "Mobile layout with a top-nav hamburger that opens the same menu.",
    "Shared TopBanner across modules with consistent theme tokens.",
    "Todos and Ideas use category-derived tabs (including All) computed from the dataset.",
    "Tab state persists across browser sessions via localStorage.",
    "Responsive and accessible UI with full keyboard navigation support.",
    "Caching system with staged changes for optimal performance.",
    "Real-time timer with continue functionality and manual time entry.",
    "Toast notification system for user feedback."
  ],
  "non_goals": [
    "No Cloudflare/Docker/remote infra.",
    "No authentication or analytics.",
    "No third-party component libraries without approval."
  ],
  "stack_preferences": {
    "frontend": "React + TypeScript",
    "build_tool": "Vite",
    "styling": "TailwindCSS",
    "routing": "in-app state (no URL routing)",
    "state_management": "React Context + localStorage",
    "notifications": "Custom toast system"
  },
  "layout": {
    "navigation": "left_sidebar_desktop + mobile_drawer",
    "sidebar": {
      "expanded_px": 264,
      "collapsed_px": 72,
      "collapsible": true,
      "shows_icons_and_labels": true,
      "collapsed_shows_icons_only": true
    },
    "topnav": {
      "height_px": 56,
      "hamburger_on_mobile": true,
      "drawer_behavior": "focus_trap_and_esc_to_close"
    }
  },
  "modules": [
    {
      "id": "todos",
      "title": "To-Dos",
      "surface": "page",
      "requirements": [
        "Interactive table with borders, zebra rows, sticky header, hover state.",
        "Columns: Task | Status | Priority | Category | Created | Actions.",
        "Inline editing: clicking Task toggles input; Enter/⌘Enter commits to working copy; Esc cancels; blur commits.",
        "Status dropdown (UI-only): open | paused | blocked (default open); changes staged only, not persisted.",
        "Row actions: Complete (green) hides row and stages removal; dirty rows show Update (teal) to stage edits.",
        "Save button: rebuilds entire todos file from working set and posts array; disabled with zero staged; shows count when >0.",
        "Sorting: created_at desc default and priority (high>medium>low|null).",
        "Caching system with staged changes overlay for performance.",
        "Force refresh capability via URL parameter.",
        "BeforeUnload warning for unsaved changes.",
        "Real-time search filtering across all fields.",
        "Webhook integration with fallback to mock data."
      ],
      "constraints": [
        "Do not hardcode category options; compute from data.",
        "Keep all behavior local-first (in-memory + optional localStorage).",
        "Ignore any status found in source data for persistence; only use UI-only status.",
        "Save is the only network action; Update/Complete are local until Save."
      ],
      "defaults": {
        "tab_order": "alpha",
        "default_sort": { "column": "priority", "direction": "desc" },
        "id_generation": "uuid"
      },
      "acceptance": [
        "Table headers (desktop): Task | Status | Priority | Category | Created | Actions.",
        "Editable cells have visible emerald focus ring and support keyboard shortcuts.",
        "Status dropdown has aria-label and is UI-only; not persisted in payload.",
        "Save posts one array and clears staging; Update/Complete do not call network.",
        "Export length N; first element is oldest (id:1), last is newest (id:N).",
        "All exported status values are 'open'.",
        "Completed rows are absent from export.",
        "Local UI reflects applied changes after Save; refresh preserves them.",
        "Caching system reduces webhook calls and improves performance.",
        "Full keyboard navigation and screen reader support."
      ]
    },
    {
      "id": "ideas",
      "title": "Ideas",
      "surface": "page",
      "requirements": [
        "Interactive table with borders, zebra rows, sticky header, hover state.",
        "Columns: Idea | Category | Notes | Created | Actions.",
        "Inline editing: clicking Idea/Category/Notes toggles input; Enter/⌘Enter commits to working copy; Esc cancels.",
        "Category dropdown with predefined options: work, projects, videos, writing, health, business, life, future.",
        "Row actions: Remove (red) hides row and stages removal; dirty rows show Update (teal) to stage edits.",
        "Save button: rebuilds entire ideas file from working set and posts array; disabled with zero staged; shows count when >0.",
        "Sorting: created_at desc default, with placeholder 'Sort by...' option.",
        "Field-specific editing: different input types for different fields.",
        "Multiline notes support with dynamic height expansion.",
        "Caching system with staged changes overlay for performance.",
        "Force refresh capability via URL parameter.",
        "BeforeUnload warning for unsaved changes.",
        "Real-time search filtering across all fields.",
        "Webhook integration with fallback to mock data."
      ],
      "constraints": [
        "Category options are predefined dropdown values (not computed from data).",
        "Keep all behavior local-first (in-memory + optional localStorage).",
        "Ignore any status found in source data for persistence; only use UI-only status.",
        "Save is the only network action; Update/Complete are local until Save."
      ],
      "defaults": {
        "tab_order": "alpha",
        "default_sort": { "column": "created_at", "direction": "desc" },
        "id_generation": "timestamp"
      },
      "acceptance": [
        "Table headers (desktop): Idea | Category | Notes | Created | Actions.",
        "Editable cells have visible emerald focus ring and support keyboard shortcuts.",
        "Category field uses dropdown with predefined lowercase values.",
        "Notes field supports multiline input and expands row height.",
        "Save posts one array and clears staging; Update/Complete do not call network.",
        "Export length N; first element is oldest (id:1), last is newest (id:N).",
        "All exported status values are 'open'.",
        "Completed rows are absent from export.",
        "Local UI reflects applied changes after Save; refresh preserves them.",
        "Field-specific input types with proper styling.",
        "Multiline notes with dynamic height adjustment.",
        "Full keyboard navigation and screen reader support."
      ]
    },
    {
      "id": "time_tracking",
      "title": "Time Tracking",
      "surface": "page",
      "requirements": [
        "Start timer (count-up), stop, continue from elapsed time, reset.",
        "Manual time entry with separate hour/minute inputs and validation.",
        "Auto-switch chart category when adding time within current period.",
        "Real-time timer display with proper state management.",
        "Form validation preventing double-submission and invalid inputs.",
        "Chart filtering by category and time period (week/month/year).",
        "Session persistence with localStorage and webhook integration.",
        "Toast notifications for user feedback and error handling.",
        "Cross-tab timer state management with TimerContext.",
        "Responsive layout with proper alignment and spacing."
      ],
      "constraints": [
        "Accurate duration math to seconds.",
        "Local-first behavior (in-memory + optional localStorage).",
        "Timer state persists across tab switches and page reloads."
      ],
      "defaults": {
        "default_category": "Gaming",
        "time_period": "week",
        "chart_category": "Gaming"
      },
      "acceptance": [
        "Timer starts, stops, continues from elapsed time, and resets properly.",
        "Manual time entry uses separate hour/minute inputs with validation.",
        "Chart automatically switches to added time category when within current period.",
        "Form validation prevents double-submission and invalid inputs.",
        "All timer state persists across tab switches and page reloads.",
        "Toast notifications provide clear user feedback.",
        "Responsive design works on mobile and desktop.",
        "Full keyboard navigation and accessibility support."
      ]
    }
  ],
  "theming": {
    "source_of_truth": "/src/theme/config.ts",
    "driven_by": "/meta/style_profile.json",
    "rules": [
      "Do not hardcode colors/fonts in components; import tokens.",
      "TopBanner renders identically on all modules.",
      "Use consistent focus rings and hover states across all interactive elements."
    ]
  },
  "data_model": {
    "todo": {
      "task": "string",
      "category": "string|null",
      "created_at": "string ISO-8601",
      "priority": "\"low\"|\"medium\"|\"high\"|null (optional)",
      "id": "string (internal-only; uuid; never displayed)",
      "status": "(ignored by UI if present)"
    },
    "idea": {
      "idea": "string",
      "category": "string|null (predefined: work|projects|videos|writing|health|business|life|future)",
      "created_at": "string ISO-8601",
      "notes": "string|null (multiline supported)",
      "id": "string (internal-only; timestamp; never displayed)",
      "status": "(ignored by UI if present)"
    },
    "session": {
      "id": "string",
      "category": "string",
      "started_at": "string ISO-8601",
      "ended_at": "string ISO-8601",
      "minutes": "number"
    }
  },
  "io_contracts": {
    "seed_inputs": [
      "/public/data/todos.json",
      "/public/data/ideas.json",
      "/public/data/sessions.json"
    ],
    "persistence_strategy": [
      "In-memory React state.",
      "Optional localStorage mirror.",
      "Tab state persists via localStorage key 'dashboard-active-tab'.",
      "Save rebuilds full file payload for webhook (mocked in dev).",
      "Caching system with staged changes overlay."
    ],
    "webhooks": [
      {
        "name": "fetchTodosFromWebhook",
        "path": "/webhook/todos",
        "method": "GET",
        "enabled_in_mvp": true
      },
      {
        "name": "saveTodosToWebhook",
        "path": "/webhook/todos",
        "method": "POST",
        "enabled_in_mvp": true
      },
      {
        "name": "fetchIdeasFromWebhook",
        "path": "/webhook/ideas",
        "method": "GET",
        "enabled_in_mvp": true
      },
      {
        "name": "saveIdeasToWebhook",
        "path": "/webhook/ideas",
        "method": "POST",
        "enabled_in_mvp": true
      },
      {
        "name": "fetchSessionsFromWebhook",
        "path": "/webhook/sessions",
        "method": "GET",
        "enabled_in_mvp": true
      },
      {
        "name": "saveSessionsToWebhook",
        "path": "/webhook/sessions",
        "method": "POST",
        "enabled_in_mvp": true
      },
      {
        "name": "fetchAllotmentsFromWebhook",
        "path": "/webhook/allotments",
        "method": "GET",
        "enabled_in_mvp": true
      },
      {
        "name": "saveAllotmentsToWebhook",
        "path": "/webhook/save-allotments",
        "method": "POST",
        "enabled_in_mvp": true
      },
      {
        "name": "fetchLedgerFromWebhook",
        "path": "/webhook/allotments-ledger",
        "method": "GET",
        "enabled_in_mvp": true
      },
    {
      "name": "saveLedgerToWebhook",
      "path": "/webhook/save-allotments-ledger",
      "method": "POST",
      "enabled_in_mvp": true
    }
    ]
  },
  "accessibility": {
    "rules": [
      "Semantic elements; visible focus.",
      "Keyboard operable navigation and tables.",
      "ARIA where appropriate.",
      "Screen reader support with live announcements.",
      "Focus management during editing operations.",
      "Full keyboard navigation for all interactive elements."
    ]
  },
  "architecture": {
    "principles": [
      "Shared primitives (TopBanner, Sidebar, Tabs, Card, Button).",
      "Pages own local state and logic.",
      "ApiClient centralizes webhook calls.",
      "TimerContext provides cross-tab timer state management.",
      "Caching system improves performance and reduces network calls.",
      "Staging system enables batch operations before saving.",
      "Avoid cross-page imports that create coupling."
    ],
    "extension_points": [
      "Add new modules by composing the same AppShell.",
      "Promote mock API to real webhooks with env vars later.",
      "Add new timer features through TimerContext.",
      "Extend caching system for new data types."
    ],
    "guardrails_for_agent": [
      "Do not modify /meta/*.",
      "Do not hardcode categories.",
      "Prefer new files over modifying shared primitives unless truly shared.",
      "Use theme tokens consistently across all components.",
      "Maintain accessibility standards in all new features."
    ]
  },
  "performance": {
    "caching": [
      "Local cache with staged changes overlay",
      "Reduces webhook calls and improves responsiveness",
      "Force refresh capability for data updates"
    ],
    "optimization": [
      "Optimistic updates for immediate feedback",
      "Efficient filtering and sorting algorithms",
      "Lazy loading and code splitting where appropriate"
    ]
  },
  "acceptance_checks": [
    "Brand displays as Geronimo in TopBanner.",
    "Desktop: collapsible left sidebar; Mobile: hamburger drawer.",
    "To-Dos: category tabs derived from data, table styled per tokens, sort/filter/add/edit, Save with webhook integration.",
    "Ideas: category tabs with predefined options, table styled per tokens, sort/filter/add/edit, Save with webhook integration.",
    "Time Tracking: start/stop/continue/reset timer, manual time entry, chart filtering, webhook integration.",
    "Tab state persists across browser sessions via localStorage.",
    "Theme tokens are used consistently across modules.",
    "A global toast system exists; any module can trigger success/error/info and it renders once via AppShell.",
    "Caching system works across all modules for improved performance.",
    "Full accessibility support with keyboard navigation and screen readers.",
    "Timer state persists across tab switches and page reloads."
  ]
}