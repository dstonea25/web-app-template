{
    "version": "1.3.0",
    "updated_at": "2025-09-08",
    "modules": [
      {
        "name": "AppShell",
        "type": "layout",
        "responsibilities": [
          "Two-pane layout (sidebar + content) on desktop; topnav + drawer on mobile.",
          "Renders TopBanner and routes module content based on active module."
        ],
        "inputs": ["active_module", "theme tokens"],
        "outputs": ["composed layout"],
        "extension_notes": [
          "Adding a new module should be append-only; avoid touching existing module internals."
        ]
      },
      {
        "name": "TopBanner",
        "type": "shared_component",
        "responsibilities": [
          "Show 'Geronimo' brand (title) and optional subtitle or actions.",
          "Identical look across modules."
        ],
        "inputs": ["theme tokens"],
        "outputs": ["header UI"]
      },
      {
        "name": "Sidebar",
        "type": "shared_component",
        "responsibilities": [
          "Desktop navigation with icons + labels.",
          "Supports expanded and collapsed states with transition."
        ],
        "inputs": ["items", "active_module", "collapsed"],
        "outputs": ["module change events"],
        "actions": ["toggleSidebar"]
      },
      {
        "name": "MobileDrawer",
        "type": "shared_component",
        "responsibilities": [
          "Same menu as Sidebar presented as a drawer from the left.",
          "Implements focus trap; ESC closes."
        ],
        "inputs": ["items", "active_module", "open"],
        "outputs": ["module change events", "close event"],
        "actions": ["openDrawer", "closeDrawer"]
      },
      {
        "name": "TopNav",
        "type": "shared_component",
        "responsibilities": [
          "Hamburger on mobile to open MobileDrawer; right-side actions slot."
        ],
        "inputs": ["onHamburger"],
        "outputs": ["open drawer"]
      },
      {
        "name": "TodosPage",
        "type": "page",
        "responsibilities": [
          "Own todos state (in-memory + optional localStorage).",
          "Expose Save action (mocked).",
          "Compose CategoryTabs and TodosTable."
        ],
        "inputs": ["seed todos", "ApiClient", "Storage"],
        "outputs": ["UI, optimistic updates"]
      },
      {
        "name": "CategoryTabs",
        "type": "shared_component",
        "responsibilities": [
          "Derive unique categories from provided todos.",
          "Render tabs: All + each category; emit selected category.",
          "Respect default tab order from scope (alpha)."
        ],
        "inputs": ["todos", "active_category"],
        "outputs": ["category change events"],
        "extension_notes": [
          "Must not hardcode category list."
        ]
      },
      {
        "name": "TodosTable",
        "type": "shared_component",
        "responsibilities": [
          "Render bordered zebra table with sticky header.",
          "Sort by created_at and priority (high>medium>low>null).",
          "Inline edit task/category; add row with optional priority; complete row."
        ],
        "inputs": ["rows", "onChange handlers", "sort state", "filter term"],
        "outputs": ["row updates", "row adds", "row completes"],
        "extension_notes": [
          "Default sort comes from scope (created_at desc).",
          "Editable cells support keyboard nav: Tab/Shift+Tab to move, Enter to commit, Esc to cancel.",
          "Status field is ignored if present; ID is internal-only and not displayed."
        ]
      },
      {
        "name": "TimeTrackingPage",
        "type": "page",
        "responsibilities": [
          "Start/stop timer; edit duration/note; append to session list.",
          "Expose Submit action (mocked)."
        ],
        "inputs": ["seed sessions", "ApiClient", "Storage", "TimeUtils"],
        "outputs": ["UI, optimistic updates"]
      },
      {
        "name": "TimerCard",
        "type": "shared_component",
        "responsibilities": [
          "Show running time; start/stop controls; state display."
        ],
        "inputs": ["running", "elapsed_ms"],
        "outputs": ["start", "stop"]
      },
      {
        "name": "SessionEditor",
        "type": "shared_component",
        "responsibilities": [
          "Edit duration and notes before confirming."
        ],
        "inputs": ["session draft"],
        "outputs": ["confirm", "cancel"]
      },
      {
        "name": "ThemeConfig",
        "type": "utility",
        "file": "/src/theme/config.ts",
        "responsibilities": [
          "Export tokens mirroring /meta/style_profile.json.",
          "Provide cn() helper for conditional className composition."
        ],
        "exports": ["tokens", "cn"]
      },
      {
        "name": "ApiClient",
        "type": "utility",
        "file": "/src/lib/api.ts",
        "responsibilities": [
          "Mock-only: delay ~300ms and return ok:true for Save/Submit/Complete."
        ],
        "exports": ["postToBackend", "postComplete"]
      },
      {
        "name": "Storage",
        "type": "utility",
        "file": "/src/lib/storage.ts",
        "responsibilities": [
          "Get/set todos and sessions from in-memory with optional localStorage mirror.",
          "Transform todos on read: ensure priority (null), ignore status, ensure id (uuid).",
          "Add helpers: addTodo (sets id, created_at, priority), completeTodo (remove + persist)."
        ],
        "exports": ["getTodos", "setTodos", "getSessions", "setSessions", "addTodo", "completeTodo"]
      },
      {
        "name": "TimeUtils",
        "type": "utility",
        "file": "/src/lib/time.ts",
        "responsibilities": [
          "nowIso, msToHms, computeDurationMs and related helpers."
        ],
        "exports": ["nowIso", "msToHms", "computeDurationMs", "formatDateTime"]
      }
    ],
    "navigation": {
      "items": [
        { "id": "todos", "label": "To-Dos", "icon": "check-square" },
        { "id": "time_tracking", "label": "Time Tracking", "icon": "timer" }
      ],
      "default_item_id": "todos"
    },
    "routes": [
      { "id": "todos", "surface": "module", "component": "TodosPage" },
      { "id": "time_tracking", "surface": "module", "component": "TimeTrackingPage" }
    ],
    "state_shapes": [
      {
        "name": "Todo",
        "fields": ["id: number|string", "task: string", "status: string", "category: string", "created_at: string"]
      },
      {
        "name": "Session",
        "fields": ["id: string", "started_at: string", "ended_at?: string", "duration_ms: number", "note?: string"]
      }
    ],
    "actions": [
      { "name": "addTodo", "in": "TodosPage", "payload": { "todo": "Todo" } },
      { "name": "editTodo", "in": "TodosTable", "payload": { "todo": "Todo" } },
      { "name": "deleteTodo", "in": "TodosTable", "payload": { "id": "number|string" } },
      { "name": "saveTodos", "in": "TodosPage", "payload": { "todos": "Todo[]" } },
      { "name": "startTimer", "in": "TimeTrackingPage", "payload": {} },
      { "name": "stopTimer", "in": "TimeTrackingPage", "payload": {} },
      { "name": "appendSession", "in": "TimeTrackingPage", "payload": { "session": "Session" } },
      { "name": "editSession", "in": "SessionEditor", "payload": { "session": "Session" } },
      { "name": "deleteSession", "in": "TimeTrackingPage", "payload": { "id": "string" } },
      { "name": "submitSessions", "in": "TimeTrackingPage", "payload": { "sessions": "Session[]" } }
    ],
    "guardrails_for_agent": [
      "Do not modify /meta/*.",
      "Do not hardcode category values; derive from data.",
      "Keep changes small and reversible; prefer additive files."
    ],
    "verification_checklist": [
      "Sidebar works (expand/collapse) on desktop with tooltip labels in collapsed mode; Mobile drawer opens/closes with focus trap and ESC.",
      "To-Dos shows All + per-category tabs derived from dataset; default sort created_at desc; ID generation uses uuid; table styled and interactive with keyboard editing.",
      "Time Tracking: timer and session list work locally; Submit mocked.",
      "Theme tokens are used consistently across modules."
    ]
  }
  